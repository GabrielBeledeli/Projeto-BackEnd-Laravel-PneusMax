# üöó Projeto BackEnd - Laravel - PneusMax

Este √© o backend do sistema **PneusMax**, desenvolvido em **Laravel** para gerenciamento de pneus, especifica√ß√µes, usu√°rios e registro de a√ß√µes no sistema.

## üìå Funcionalidades Principais

O sistema PneusMax oferece as seguintes funcionalidades:

-   **Gerenciamento Completo de Pneus (CRUD):**
    -   **Cadastro:** Adi√ß√£o de novos pneus com suas informa√ß√µes b√°sicas (marca, modelo, aro, medida, pre√ßo, quantidade em estoque) e suas especifica√ß√µes t√©cnicas detalhadas.
    -   **Listagem:** Visualiza√ß√£o de todos os pneus cadastrados em um painel intuitivo.
    -   **Edi√ß√£o:** Atualiza√ß√£o de informa√ß√µes de pneus existentes.
    -   **Exclus√£o (Soft Delete):** Remo√ß√£o l√≥gica de pneus e suas especifica√ß√µes associadas, permitindo a recupera√ß√£o futura e mantendo a integridade dos logs.

-   **Gerenciamento de Especifica√ß√µes T√©cnicas:**
    -   Cadastro e associa√ß√£o de caracter√≠sticas como largura, perfil, √≠ndices de peso e velocidade, tipo de constru√ß√£o, tipo de terreno e desenho para cada pneu.

-   **Controle de Usu√°rios:**
    -   **Sistema de Autentica√ß√£o Completo:** Registro e login de usu√°rios implementados com o scaffolding do Laravel Breeze, garantindo a seguran√ßa das senhas atrav√©s de hashing.
    -   **Restri√ß√£o de Acesso:** Rotas e funcionalidades protegidas por middlewares, garantindo que apenas usu√°rios autenticados possam acess√°-las.

-   **Registro de A√ß√µes (Logs):**
    -   Um sistema de log detalhado que registra todas as opera√ß√µes de cria√ß√£o, edi√ß√£o e exclus√£o de pneus, incluindo o usu√°rio respons√°vel e a data/hora da a√ß√£o.
    -   P√°gina dedicada para visualiza√ß√£o do hist√≥rico completo de logs.
 
 # üß† Padr√µes de Projeto Implementados

Com o objetivo de tornar o c√≥digo **mais modular, reutiliz√°vel e f√°cil de manter**, o projeto PneusMax aplica diversos **Design Patterns (Padr√µes de Projeto)** reconhecidos na engenharia de software:

üîπ **Strategy Pattern ‚Äî Sistema de Logs**

**Implementa√ß√£o:**

Interface: LogStrategyInterface
Estrat√©gias concretas: LogCriacao, LogEdicao, LogExclusao
Contexto: LogContext

O sistema de logs do PneusMax utiliza o padr√£o Strategy para registrar a√ß√µes cr√≠ticas realizadas sobre os pneus. Cada tipo de opera√ß√£o (cria√ß√£o, edi√ß√£o, exclus√£o) √© encapsulada em uma estrat√©gia de log espec√≠fica, que implementa a interface LogStrategyInterface.
A classe LogContext atua como orquestradora da estrat√©gia atual, recebendo dinamicamente a estrat√©gia apropriada e executando o m√©todo registrar() com base no pneu afetado.



**Justificativa:**
Esse padr√£o promove o **princ√≠pio do Aberto/Fechado (OCP)**, permitindo adicionar novas formas de registro (como logs em arquivo, envio para sistemas externos, etc.) sem alterar o c√≥digo existente. A separa√ß√£o entre o contexto (LogContext) e as estrat√©gias (LogCriacao, LogEdicao, LogExclusao) garante baixo acoplamento, alta coes√£o e flexibilidade para testes e manuten√ß√£o

üîπ **Factory Method ‚Äî Cria√ß√£o de Pneus**

**Implementa√ß√£o:**

Interface: PneuFactoryInterface

Implementa√ß√£o concreta respons√°vel por instanciar e configurar objetos Pneu com suas depend√™ncias e dados validados.

Utilizado no **controller de pneus** para remover l√≥gica de cria√ß√£o repetitiva, delegando a responsabilidade para a **f√°brica**.

**Justificativa:**
O uso do Factory Method torna o c√≥digo do controller mais **enxuto e coeso**, seguindo o princ√≠pio da **Responsabilidade √önica (SRP)**.
Facilita ainda testes unit√°rios e futuras modifica√ß√µes na forma de cria√ß√£o de pneus (por exemplo, cria√ß√£o em massa, importa√ß√£o de planilhas etc.).

üîπ **Command Pattern ‚Äî Cria√ß√£o de Pneus**

**Implementa√ß√£o:**

Classe: CreatePneusCommand

Respons√°vel por **encapsular toda a l√≥gica de cria√ß√£o** de pneus em um √∫nico objeto de comando.

O controller apenas dispara o comando, sem precisar conhecer os detalhes de como o pneu √© persistido.

**Justificativa:**
O Command Pattern desacopla **o ato de executar uma a√ß√£o** (como criar um pneu) da **forma como ela √© realizada**.
Isso facilita o reuso, logging, testes e eventuais filas de processamento ass√≠ncrono.


üîπ **Handler ‚Äî Orquestra√ß√£o de Comandos**

**Implementa√ß√£o:**

Classe: CreatePneusCommandHandler
Respons√°vel por intermediar a execu√ß√£o do comando de cria√ß√£o de pneus, recebendo os dados validados do controller e repassando-os ao CreatePneusCommand.
O handler atua como uma camada de orquestra√ß√£o, permitindo que futuras a√ß√µes como valida√ß√µes adicionais, normaliza√ß√µes, logs ou disparo de eventos sejam centralizadas em um √∫nico ponto.

**Justificativa:**

O uso de um handler separa a inten√ß√£o de executar uma a√ß√£o (controller) da execu√ß√£o real (command), promovendo o princ√≠pio da Separa√ß√£o de Responsabilidades (SRP). Tamb√©m facilita testes unit√°rios e permite evolu√ß√µes futuras sem alterar o controller.



üîπ **Query Object Pattern ‚Äî Listagem de Pneus**

**Implementa√ß√£o:**

Classe: ListarPneusQuery

Centraliza a l√≥gica de listagem e filtragem de pneus, removendo consultas SQL/Eloquent diretas do controller.

**Justificativa:**
Garante **organiza√ß√£o e reutiliza√ß√£o de consultas complexas**, deixando o controller focado apenas na orquestra√ß√£o de requisi√ß√µes.
Seguindo o princ√≠pio CQRS (Command Query Responsibility Segregation), separa comandos (a√ß√µes) de consultas (leituras).

## üõ†Ô∏è Tecnologias Utilizadas

-   **PHP 8+:** Linguagem de programa√ß√£o.
-   **Laravel 10+:** Framework PHP para desenvolvimento web.
-   **MySQL/MariaDB:** Sistema de gerenciamento de banco de dados.
-   **Composer:** Gerenciador de depend√™ncias para PHP.
-   **Laravel Breeze:** Scaffolding de autentica√ß√£o.
-   **PHPUnit:** Framework de testes para PHP.

## üìÇ Estrutura de Banco de Dados e Modelagem

O sistema √© constru√≠do sobre um banco de dados relacional com as seguintes entidades principais, e suas escolhas de modelagem visam clareza, efici√™ncia e integridade dos dados:

-   **Pneu:**
    -   Armazena informa√ß√µes comerciais e de estoque (marca, modelo, aro, medida, pre√ßo, quantidade_estoque).
    -   Possui uma chave prim√°ria `id_pneu`.
    -   Implementa **Soft Deletes** (`deleted_at`) para permitir a recupera√ß√£o de registros e manter o hist√≥rico de a√ß√µes.

-   **Especifica√ß√£o:**
    -   Cont√©m os detalhes t√©cnicos do pneu (largura, perfil, √≠ndice_peso, √≠ndice_velocidade, tipo_construcao, tipo_terreno, desenho).
    -   Possui uma chave prim√°ria `id_especificacao`.
    -   **Relacionamento Um-para-Um (1:1) com Pneu:** Cada pneu tem uma e apenas uma especifica√ß√£o, e cada especifica√ß√£o pertence a um √∫nico pneu. Essa modelagem separa as informa√ß√µes comerciais das t√©cnicas, tornando o esquema mais organizado e flex√≠vel. A exclus√£o l√≥gica de um Pneu tamb√©m aciona a exclus√£o l√≥gica de sua Especifica√ß√£o associada.
    -   Implementa **Soft Deletes** (`deleted_at`).

-   **Usu√°rio:**
    -   Gerencia as credenciais de acesso ao sistema (nome, email, senha).
    -   Possui uma chave prim√°ria `id`.
    -   As senhas s√£o armazenadas com **hashing** para seguran√ßa.

-   **Log de A√ß√µes:**
    -   Registra todas as opera√ß√µes significativas (cria√ß√£o, edi√ß√£o, exclus√£o) realizadas nos pneus.
    -   Cont√©m `id_log`, `id_pneu` (chave estrangeira para Pneu), `id_usuario` (chave estrangeira para Usu√°rio), `acao` (tipo de opera√ß√£o) e `data_hora`.
    -   **Relacionamento Um-para-Muitos (1:N):** Um Pneu pode ter muitos Logs de A√ß√µes, e um Usu√°rio pode realizar muitas A√ß√µes. Isso garante um hist√≥rico completo e audit√°vel das opera√ß√µes no sistema.

## üß™ Testes Automatizados

Para garantir a qualidade do c√≥digo e a robustez das funcionalidades, o projeto inclui **testes unit√°rios** automatizados, desenvolvidos com **PHPUnit**.

-   **Testes Unit√°rios de Valida√ß√£o (`validacao_pneu_request_test.php`):**
    -   Verificam as regras de valida√ß√£o para o cadastro de novos pneus, garantindo que apenas dados v√°lidos sejam aceitos pelo sistema.
    -   Incluem cen√°rios de sucesso (dados v√°lidos) e falha (dados ausentes ou inv√°lidos).

-   **Teste Unit√°rio do Modelo `User` (`user_test.php`):**
    -   Verifica a configura√ß√£o b√°sica do modelo de usu√°rio, como os atributos que podem ser preenchidos em massa (`$fillable`).

-   **Conven√ß√£o de Nomenclatura:** Os arquivos de teste e as classes de teste seguem a conven√ß√£o `snake_case` (`*_test.php`) para facilitar a identifica√ß√£o e organiza√ß√£o, configurada no `phpunit.xml`.

## üöÄ Como Executar o Projeto

Siga os passos abaixo para configurar e executar o projeto PneusMax em seu ambiente local:

### Pr√©-requisitos

Certifique-se de ter os seguintes softwares instalados em sua m√°quina:

-   **PHP >= 8.2**
-   **Composer**
-   **Node.js >= 16.x**
-   **npm >= 8.x**
-   **MySQL** ou **MariaDB** (ou outro banco de dados compat√≠vel com Laravel)

### Instala√ß√£o e Configura√ß√£o

1.  **Clone o reposit√≥rio:**
    ```bash
    git clone https://github.com/GabrielBeledeli/Projeto-BackEnd-Laravel-PneusMax.git
    cd Projeto-BackEnd-Laravel-PneusMax
    ```

2.  **Instale as depend√™ncias do Composer:**
    ```bash
    composer install
    ```

3.  **Copie o arquivo de ambiente:**
    ```bash
    cp .env.example .env
    # Para Windows:
    # copy .env.example .env
    ```

4.  **Gere a chave da aplica√ß√£o:**
    ```bash
    php artisan key:generate
    ```

5.  **Configure o banco de dados:**
    Abra o arquivo `.env` e configure as credenciais do seu banco de dados:
    ```
    DB_CONNECTION=mysql
    DB_HOST=127.0.0.1
    DB_PORT=3306
    DB_DATABASE=pneusmax
    DB_USERNAME=root
    DB_PASSWORD=
    ```
    *Certifique-se de que o banco de dados `pneusmax` (ou o nome que voc√™ escolher) j√° esteja criado em seu servidor MySQL/MariaDB.*

6.  **Execute as migra√ß√µes e os seeders:**
    ```bash
    php artisan migrate --seed
    ```
    *Isso criar√° as tabelas no banco de dados e as popular√° com dados iniciais de teste.*

7.  **Instale as depend√™ncias do Node.js:**
    ```bash
    npm install
    ```

### Executando a Aplica√ß√£o

Para rodar a aplica√ß√£o, voc√™ precisar√° de dois terminais:

1.  **No primeiro terminal, inicie o servidor de desenvolvimento frontend (Vite):**
    ```bash
    npm run dev
    ```
    *Este comando compila e serve os assets JavaScript e CSS. Ele deve permanecer em execu√ß√£o enquanto voc√™ estiver desenvolvendo.*

2.  **No segundo terminal, inicie o servidor de desenvolvimento Laravel:**
    ```bash
    php artisan serve
    ```

### Acessando a Aplica√ß√£o

Ap√≥s ambos os servidores estarem em execu√ß√£o, abra seu navegador e acesse:

```
http://127.0.0.1:8000
```

### Para Produ√ß√£o

Para preparar os assets para um ambiente de produ√ß√£o, execute:

```bash
npm run build
```
*Este comando ir√° compilar e otimizar todos os seus assets frontend para serem servidos de forma est√°tica.*

## üß† Autores

-   **Gabriel Beledeli Hul**
-   **Caio Eduardo Gemin Guarienti**
-   **Alisson Eraldo Da Silva**

Engenharia de Software 4A  
Centro Universit√°rio Campo Real

> Projeto desenvolvido para fins acad√™micos e aprendizado.

---

**Sinta-se √† vontade para explorar, testar e adaptar o PneusMAX!** üöóüõû
